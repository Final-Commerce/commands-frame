# assignCustomer

Assigns an existing customer to the current active session/cart in the parent application.

## Parameters

### `AssignCustomerParams`

```typescript
interface AssignCustomerParams {
    customerId: string;  // Required
}
```

#### `customerId` (required)

The ID of the customer to assign to the current session. Can be either:
- MongoDB ObjectId string (e.g., `"507f1f77bcf86cd799439011"`)
- Alternative ID string if the customer object uses an `id` field

## Response

### `AssignCustomerResponse`

```typescript
interface AssignCustomerResponse {
    success: boolean;
    customer: any;
    timestamp: string;
}
```

#### `success` (boolean)

Indicates whether the customer was successfully assigned to the session.

#### `customer` (any)

The customer object that was assigned to the session. This is the complete customer record retrieved from the database. The structure depends on the database implementation. See the [Real Data Examples](#real-data-examples) section below for actual customer object structures.

#### `timestamp` (string)

ISO 8601 timestamp string (e.g., `"2024-01-01T00:00:00.000Z"`) indicating when the response was generated by the handler.

## Usage

```typescript
import { commands } from '@final-commerce/commands-frame';
```

## Usage Examples

### Basic Assignment

Assign a customer to the current session:

```typescript
import { commands } from '@final-commerce/commands-frame';

const result = await commands.assignCustomer({
    customerId: '691df9c6c478bada1fb23cdd'
});

console.log(result.customer);
console.log('Customer assigned:', result.success);
```

## Behavior

When a customer is assigned:

1. The customer is retrieved from the local database
2. The customer is set as the active customer in the Redux store
3. The customer information becomes available for the current session/cart
4. Any subsequent operations (orders, transactions) will be associated with this customer

## Error Handling

The handler will throw errors if the `customerId` is missing or if the customer is not found.

## Real Data Examples

### Example Response

```json
{
  "success": true,
  "customer": {
    "_id": "691df9c6c478bada1fb23cdd",
    "isDeleted": false,
    "createdAt": "2024-12-03T10:00:00.000Z",
    "updatedAt": "2024-07-26T19:12:03.104Z",
    "companyId": "691df9c4c478bada1fb23bff",
    "email": "michael.smith@gmail.com",
    "firstName": "Michael",
    "lastName": "Smith",
    "phone": "+1-415-555-1234",
    "tags": [],
    "fromOliver": false,
    "metadata": [],
    "notes": [],
    "billing": {
      "address1": "123 Main Street",
      "address2": "",
      "city": "San Francisco",
      "company": "",
      "country": "US",
      "firstName": "Michael",
      "lastName": "Smith",
      "postCode": "94105",
      "state": "CA"
    },
    "shipping": {
      "address1": "123 Main Street",
      "address2": "",
      "city": "San Francisco",
      "company": "",
      "country": "US",
      "firstName": "Michael",
      "lastName": "Smith",
      "postCode": "94105",
      "state": "CA"
    },
    "__v": 0,
    "meta": {
      "revision": 0,
      "created": 1764875997651,
      "version": 0
    },
    "$loki": 1
  },
  "timestamp": "2025-12-04T19:25:50.817Z"
}
```

### Example Request

```json
{
  "customerId": "691df9c6c478bada1fb23cdd"
}
```

## Notes

- The customer must exist in the local database before assignment
- Deleted customers (`isDeleted: true`) cannot be assigned
- The assignment updates the active customer in the Redux store
- The customer ID structure depends on the database implementation (may be `id`, `_id`, `$loki`, or other formats)
- After assignment, the customer is available for the current session until a new customer is assigned or the session is cleared

