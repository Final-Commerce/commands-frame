# getProductVariants

Retrieves all variants for a specific product from the parent application's local database.

## Parameters

### `GetProductVariantsParams`

```typescript
interface GetProductVariantsParams {
    productId: string;
}
```

#### `productId` (required)

The ID of the product to get variants for.

## Response

### `GetProductVariantsResponse`

```typescript
interface GetProductVariantsResponse {
    variants: any[];
    productId: string;
    timestamp: string;
}
```

#### `variants` (any[])

Array of variant objects for the specified product. The actual structure may vary depending on the database implementation (MongoDB/mongoose vs LokiJS/IndexedDB). See the [Real Data Examples](#real-data-examples) section below for actual variant object structures.

#### `productId` (string)

The product ID that was queried.

#### `timestamp` (string)

ISO 8601 timestamp string (e.g., `"2024-01-01T00:00:00.000Z"`) indicating when the response was generated by the handler.

## Usage

```typescript
import { commands } from '@final-commerce/commands-frame';
```

## Usage Examples

### Get Variants for a Product

```typescript
import { commands } from '@final-commerce/commands-frame';

const result = await commands.getProductVariants({
    productId: '691df9c6c478bada1fb23d31'
});

console.log(result.variants);
```

## Real Data Examples

### Example Response

```json
{
  "variants": [
    {
      "_id": "691df9c6c478bada1fb23d55",
      "productId": "691df9c6c478bada1fb23d31",
      "price": "10.00",
      "images": [],
      "isDeleted": false,
      "createdAt": "2024-12-03T10:00:00.000Z",
      "updatedAt": "2024-12-03T10:00:00.000Z"
    }
  ],
  "productId": "691df9c6c478bada1fb23d31",
  "timestamp": "2025-12-04T19:24:05.456Z"
}
```

### Example Variant with Full Details

```json
{
  "_id": "691df9c6c478bada1fb23d55",
  "productId": "691df9c6c478bada1fb23d31",
  "companyId": "691df9c4c478bada1fb23bff",
  "price": "10.00",
  "images": [],
  "attributes": [],
  "inventory": [],
  "isDeleted": false,
  "createdAt": "2024-12-03T10:00:00.000Z",
  "updatedAt": "2024-12-03T10:00:00.000Z"
}
```

## Variant Structure Reference

The variant structure may vary depending on the database implementation. The structure shown above is a reference based on MongoDB schemas. In practice, variant objects are returned as `any` to allow flexibility between different database implementations (MongoDB/mongoose vs LokiJS/IndexedDB).

Key fields that may be present:

- **Attributes**: Variant attributes with name and value pairs (e.g., Size: "Large", Color: "Red").
- **Inventory**: Variant inventory is tracked per outlet in the `inventory` array.
- **Pricing**: Variants can have `price`, `salePrice`, and `costPrice`.
- **ID fields**: The ID field structure depends on the database (may be `id`, `_id`, or other formats).

## Error Handling

If the product ID is not provided, the handler will throw an error. If the query fails or no variants are found, the handler returns an empty array.

## Notes

- Deleted variants (`isDeleted: true`) are automatically excluded
- Variants are sorted by name (ascending) by default
- The function requires a valid product ID
- If the product doesn't exist or has no variants, an empty array is returned

